<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
  /* container on the right */
  .piano-lift-widget {
    position: fixed;
    right: 18px;
    bottom: 80px;
    width: 120px;
    z-index: 9999;
    user-select: none;
    touch-action: none;
    display: flex;
    align-items: center;
    justify-content: center;
    pointer-events: auto;
  }

  /* small shadow card for visibility */
  .piano-lift-card {
    background: rgba(255,255,255,0.96);
    border-radius: 14px;
    padding: 10px;
    box-shadow: 0 8px 20px rgba(0,0,0,0.18);
    display: grid;
    gap: 6px;
    justify-items: center;
  }

  /* scale down on small screens */
  @media (max-width:600px){ 
    .piano-lift-widget{ display: none; } /* hide on small screens to not block UI */
  }

  .piano-area { width: 84px; height: 160px; overflow: visible; display:block; }

  /* rope handle (the ring) cursor */
  .rope-handle { cursor: grab; touch-action: none; }
  .rope-handle:active { cursor: grabbing; }

  /* piano element defaults - we'll translate it with JS */
  .piano {
    transform-origin: center;
    transition: transform 400ms cubic-bezier(.2,.9,.2,1);
    will-change: transform;
  }

  /* gentle bobbing at rest */
  .piano.rest {
    animation: piano-bob 2.8s ease-in-out infinite;
  }
  @keyframes piano-bob {
    0% { transform: translateY(0) scale(1); }
    50% { transform: translateY(-6px) scale(1.005); }
    100% { transform: translateY(0) scale(1); }
  }

  /* progress bar under widget */
  .lift-progress {
    width: 84px;
    height: 6px;
    background: #eee;
    border-radius: 6px;
    overflow: hidden;
  }
  .lift-progress > i {
    display: block;
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg,#16a34a,#06b6d4);
    transition: width 120ms linear;
  }

  /* back-to-top fallback button (accessible) */
  .to-top-btn {
    display: inline-block;
    margin-top: 6px;
    background: #2563eb;
    color: white;
    font-weight: 600;
    padding: 7px 10px;
    border-radius: 8px;
    text-decoration: none;
    font-size: 13px;
  }
  .to-top-btn:focus { outline: 3px solid rgba(37,99,235,0.2); }
</style>
</head>
<body>
    <!-- ====== START: Back-to-top with piano rope animation ====== -->
Lorem ipsum dolor sit amet consectetur adipisicing elit. Molestiae, magni aliquid laborum reprehenderit voluptatibus soluta necessitatibus ratione fuga beatae voluptas architecto dolores eum. Eligendi quis nobis vero impedit ducimus corrupti nam distinctio ratione dolore sunt ab accusamus hic et incidunt cupiditate vel quam rerum, quo esse commodi eius consequatur nulla velit quos! Mollitia eius delectus assumenda. Sint voluptate totam, accusantium cupiditate ullam nihil fugit nam quos. Aut corrupti accusamus doloremque, quidem ut quibusdam. Quaerat ipsam quam cumque. Dolor quisquam, adipisci dicta corporis possimus maiores tempore perspiciatis dolore! Cum ipsam minus sequi dolores in, pariatur quas ab, sint quidem, eaque praesentium maxime harum doloribus maiores excepturi facere dicta corrupti tempore tempora aliquid! Neque optio quam eveniet laboriosam. Nisi nam exercitationem veniam, debitis ad fuga sequi laborum nostrum, illo placeat blanditiis harum enim soluta sint? Nihil temporibus sed similique dignissimos! Libero quibusdam sit eum quaerat esse itaque, dicta repudiandae at ex eveniet sunt fugiat voluptatem quam nesciunt quos autem est dolor ullam quo, aut earum provident vitae nisi deserunt. Illum optio quae voluptas corrupti asperiores ullam est saepe accusamus repudiandae doloribus explicabo rem facilis, ex accusantium ab commodi culpa doloremque reprehenderit? Blanditiis maiores quidem exercitationem iste ducimus natus odit accusamus, cum corporis eaque explicabo ea nesciunt delectus officia nam? Temporibus ad asperiores explicabo inventore quisquam? Vero corrupti natus ipsa voluptatem, optio iure qui sunt commodi, adipisci eius distinctio minima autem, velit magnam fugiat vel modi? Ratione omnis maiores aut. Necessitatibus mollitia quam assumenda beatae quod numquam adipisci dolorem atque dicta! Eaque architecto, odit voluptates eligendi itaque suscipit ut molestias eum. Quas obcaecati iusto provident nostrum qui nesciunt reiciendis nemo ullam. Illum consequatur, voluptatibus saepe cum ducimus maiores fuga pariatur facere vitae dolor ad, quidem fugit quis nemo est consectetur accusantium? Temporibus, quaerat? Libero et facere dolores delectus ut eius tempore, inventore recusandae at quibusdam! Quaerat possimus voluptatum iste itaque deleniti, eos saepe deserunt, pariatur ipsa necessitatibus ratione distinctio quos minus quisquam, voluptatem temporibus enim placeat sequi dolorum veritatis vel laboriosam aut dolorem! Corrupti accusamus iste nulla accusantium cum asperiores eligendi repudiandae tempora laboriosam perspiciatis quos aspernatur, facilis officia? Officiis corporis, dicta amet vero maiores dolore labore doloremque iste adipisci quas ullam harum, rerum et neque minima! Recusandae debitis numquam quisquam perspiciatis magnam quia, explicabo repellendus veritatis nostrum adipisci commodi ipsum eum nisi, suscipit repudiandae iste accusantium perferendis asperiores temporibus soluta omnis? Sapiente natus commodi doloribus? A tempore voluptate eius rerum quibusdam non id voluptates error voluptatem deserunt, veniam debitis vel placeat pariatur excepturi officiis autem doloremque saepe nesciunt eaque explicabo inventore sit amet veritatis? Amet ducimus, culpa reiciendis voluptatibus a ratione? Alias omnis modi dolorem tenetur molestiae suscipit inventore dolorum ratione iste ipsum, doloremque ipsam atque? Laboriosam, autem! Reprehenderit accusamus illo ipsum iste illum perferendis quaerat alias nobis odio. Itaque eius aspernatur facilis corrupti facere iure aperiam! Maiores, quas expedita dolores repellendus error sunt sequi, deserunt non molestiae excepturi nobis dolorum harum facilis eius asperiores cupiditate neque tenetur. Voluptatem quo qui adipisci recusandae maxime atque, nihil aliquid non possimus? Harum error, ducimus distinctio ipsam aspernatur quidem minus architecto nisi quae non, et placeat blanditiis voluptate modi fugiat? Aliquam suscipit corrupti repellat voluptas soluta natus, architecto, labore culpa, adipisci atque totam doloremque explicabo quam doloribus eveniet veniam ratione. Commodi sit esse cumque nostrum voluptates. Qui corporis minus fugiat eum ea aperiam adipisci saepe voluptatibus optio culpa. Illum rerum dolore commodi excepturi dolor nisi qui nulla maxime cupiditate optio aliquam neque quasi facere inventore ipsum numquam illo mollitia voluptates, iste ut odit quibusdam porro. Accusantium nemo id distinctio sint. Eveniet, ea tempore. Vel non maxime vero corporis, architecto doloribus tempora assumenda delectus aspernatur eos pariatur ad reiciendis magnam porro in fugiat! Nam dolores, expedita provident laboriosam iure doloremque odio! Aliquid iste impedit, quo repellendus libero reiciendis magnam quidem quas. Quibusdam minima sunt nobis asperiores veritatis ratione illo facilis ea totam. Laborum, adipisci asperiores. Explicabo perferendis architecto consequuntur magnam, reiciendis totam accusantium sint, atque quam ratione deleniti facere corrupti aperiam. Officia dicta sint mollitia, excepturi libero labore numquam, illo itaque placeat nisi ipsum consequuntur cumque. Unde facilis iste modi dolorem, nulla excepturi eius quas veniam quod aliquid quo ullam assumenda dicta qui eaque, ipsa culpa nihil veritatis officiis debitis aliquam? Quasi esse dolorem officia, ipsum laudantium nostrum facilis nesciunt aperiam possimus, expedita soluta? Consequatur numquam ratione hic velit, reprehenderit adipisci dolorum error cumque eos alias quam accusantium laborum nesciunt eaque qui molestias. Deserunt repudiandae, tempore et ipsam eos eveniet molestiae sunt voluptate. Consequatur ducimus ullam odit nostrum reprehenderit fugiat aut maxime dolore ipsa ratione dicta, magni error assumenda libero aspernatur atque vitae nobis maiores quasi, tempora exercitationem? Laudantium doloremque ratione repellendus tempore accusamus repudiandae, quod ab libero a, inventore non optio veniam dolorum eligendi fugiat mollitia nam esse sed sunt temporibus corrupti voluptatum, animi distinctio. Asperiores iure aut dolorum nostrum, dolor exercitationem laborum eligendi cupiditate officia nam reiciendis repellat. Tempore repudiandae reiciendis cumque ex saepe quo delectus iste fuga recusandae in! Fugit consequuntur sit, dolores ea nostrum perferendis enim. Placeat, officia ratione cumque labore blanditiis nostrum laborum aperiam eligendi magnam tempora neque quidem sint ad, cum, aliquam temporibus fugiat nulla! Alias corrupti omnis nemo exercitationem iure earum sunt maiores, magni officiis accusantium voluptatibus consectetur ex odit modi consequuntur delectus minus reiciendis totam soluta repudiandae. Quo, impedit fuga? Soluta a, deleniti doloribus, magni rem obcaecati nulla totam quidem cumque molestias assumenda ducimus illo nisi atque porro impedit optio corrupti id quas deserunt quisquam expedita. Facere delectus nemo et! Voluptatem officia et officiis expedita, temporibus iste pariatur natus eius voluptatibus dolore ad mollitia beatae recusandae illum itaque repellat quam doloremque, necessitatibus error quasi ab architecto ipsa deleniti. Saepe esse distinctio, corrupti culpa est illo molestiae autem laudantium facilis praesentium voluptatem, dolor nam, nesciunt consectetur fugit quos quia aspernatur sed ut qui animi facere dolores soluta. Similique dolorem ducimus laudantium quasi, labore veniam totam? Consequuntur, magnam eum eligendi perferendis modi architecto similique libero, doloremque placeat enim aspernatur quo facere? Deleniti, inventore! Mollitia natus ratione placeat eos eaque aliquid perferendis quisquam nostrum aspernatur, sed fugit illo. Neque eaque magni porro ipsum vero alias at, similique nisi nulla molestias velit id consectetur minus! Fuga accusantium doloribus tempore modi placeat pariatur distinctio atque ab soluta cum, quis quo officia, beatae ipsa dolore ea nisi. Eum magni voluptatem nobis hic? Culpa libero quod, nostrum placeat laboriosam exercitationem officiis molestiae distinctio corporis corrupti sunt nesciunt. Aperiam suscipit provident molestias quis? Nostrum dolore autem reprehenderit tenetur deleniti, saepe odio eligendi, mollitia non, laborum quae nobis consectetur possimus officiis! Consectetur impedit eaque praesentium necessitatibus magni tenetur quam repellendus ut, sint illo adipisci culpa porro dolores cumque beatae, id velit. Asperiores, laboriosam! Quia, numquam consectetur, nobis corrupti placeat cupiditate dolor nam molestias iure enim distinctio iste ab fugiat. Autem, alias soluta. Et tempora veniam a facilis ipsum fugit qui, laborum, magnam harum quaerat quod numquam eveniet ut consequuntur minus. Quaerat iste ut nam voluptate ab molestiae magnam amet officiis fugit nulla consequatur inventore veniam ipsum soluta neque reiciendis quasi voluptatibus reprehenderit cumque, adipisci odit, possimus facilis non explicabo? Voluptates necessitatibus quidem aliquam dolores deserunt! Eveniet dolorem repudiandae nisi ea impedit. Necessitatibus veritatis eos nobis hic harum sed non? Cumque iusto nobis nulla obcaecati eveniet, tempore ipsam architecto consequatur! Tempore magnam obcaecati adipisci id perspiciatis mollitia architecto. Laudantium nostrum, quae unde quia delectus ad enim harum nobis at odit nulla sequi consequatur pariatur, recusandae veniam culpa. Modi rerum dolore repudiandae veniam. Eaque aliquam, suscipit dignissimos animi iusto iste veniam labore officia sequi cumque deleniti, distinctio non deserunt sit! Commodi iure et placeat tempore! Totam deserunt tempora ut dolore rem magni dignissimos sint, doloremque impedit tenetur ratione odio sapiente. Ipsum quae natus aut dolor. Nemo quae minus illo explicabo quod, doloremque mollitia consectetur, vel eos ad fugit odio quas, quo eaque qui cumque nesciunt molestiae officia placeat! Rerum perferendis saepe dignissimos quas quibusdam amet veritatis cupiditate, in tenetur sunt repudiandae nam nihil suscipit? Aut assumenda tenetur hic explicabo vitae quia voluptates voluptatum. Ut, incidunt perferendis? Iure, nesciunt cumque. Ab libero voluptatum tenetur deleniti aperiam nam fugiat vel animi corrupti enim optio alias dicta velit, accusamus a recusandae nesciunt, architecto magni nostrum totam! Perferendis, quia! Libero dolore suscipit nostrum quidem laboriosam soluta earum iste dolores explicabo, exercitationem eum quaerat laborum iusto similique perspiciatis. Assumenda tenetur nisi ipsam quas delectus esse reiciendis veniam quaerat magnam atque. Sit ducimus dolore doloremque, recusandae hic itaque magnam quod vel temporibus voluptas adipisci natus? Corporis omnis nesciunt temporibus magnam dolorem recusandae cupiditate minima. Eius cumque sint minus eligendi dolores blanditiis, quas consectetur numquam ea omnis ut amet veniam. Recusandae, aspernatur aliquam. Maxime aut sint asperiores, autem obcaecati iure quia eligendi, consectetur laborum distinctio, ab eum exercitationem quibusdam dicta modi nemo accusantium consequuntur dolorum. Illo dolorum assumenda recusandae ipsa dolorem molestiae officiis earum, commodi sint accusantium saepe nobis consectetur fuga corporis esse cumque nulla! Magni natus non sapiente consequuntur enim dicta minus optio reprehenderit! Provident nihil excepturi doloribus soluta voluptas assumenda ipsam minus quia iure reprehenderit vel explicabo, iusto totam ducimus. Voluptatibus, nihil expedita ut, quasi enim blanditiis, unde nisi officiis tempora similique fugit dolorem distinctio ad? Excepturi ea ipsa numquam quas nam. Animi at sequi sit possimus voluptates id aliquid ipsam maxime recusandae sed labore distinctio quia, veniam ut quod tenetur saepe aliquam rem nam beatae incidunt eius. Accusantium, distinctio natus omnis, laborum nihil atque iure illum, voluptatibus dignissimos asperiores inventore iusto officiis voluptate architecto officia illo tenetur dolorum! Ipsa quo repellat necessitatibus numquam vel, nostrum dolor ullam voluptatem, corporis eum natus asperiores modi nulla debitis voluptatum amet sed! Facere, illo dignissimos! Consectetur dicta atque obcaecati, voluptates cumque dignissimos ut quod voluptatibus vel nesciunt magni adipisci iure inventore delectus quibusdam aperiam exercitationem neque alias maxime. Est architecto autem consequuntur velit tempore itaque maxime ea pariatur dicta fuga accusamus, porro praesentium illo aperiam soluta natus, repellat aspernatur et. Velit nostrum enim aliquam? Cupiditate veritatis blanditiis, quidem eaque ab consequatur placeat impedit quae reprehenderit quia nisi mollitia ratione aliquid quod commodi, ut laudantium harum nemo! Distinctio veniam officiis, atque et est minima molestiae fugiat aut deserunt iusto, facilis consequuntur blanditiis quos repudiandae obcaecati cum aspernatur. Aut impedit et facere veniam in maiores doloremque corporis blanditiis, architecto tempore corrupti laboriosam vel voluptas expedita optio provident voluptatum sapiente reprehenderit ipsa molestias officia repudiandae quasi! Praesentium eum rerum numquam minima aperiam, veritatis nihil harum. Quam earum ex praesentium facere placeat eligendi laborum ipsa debitis? Voluptatibus enim veritatis est neque dicta placeat voluptatum quibusdam beatae ea consequuntur? Eligendi dicta quam recusandae sapiente nisi alias dolor consectetur blanditiis impedit, incidunt dolores nostrum cupiditate numquam dolorem, velit nihil modi eum ipsum qui vel voluptate aliquam rem minus? Accusantium labore maxime quae amet culpa, ducimus aliquam nemo in consequuntur! Harum, amet. Consequatur recusandae, illo praesentium voluptate ea voluptatibus perferendis eius omnis voluptas! Omnis in fugit, doloremque rem itaque officia libero placeat numquam debitis minus vero aliquam accusantium quasi temporibus culpa odit, quo recusandae natus iste, dignissimos dicta voluptatibus praesentium architecto est. Dicta maxime dolor, aut soluta voluptatibus atque, provident repellendus obcaecati, est voluptatum harum magni perspiciatis! Aperiam aut maxime reprehenderit, similique harum voluptate modi ex veniam at et numquam hic quisquam doloribus amet earum ad veritatis excepturi, enim voluptates nemo illum? Quibusdam dignissimos architecto earum repudiandae tempora laboriosam laborum consequuntur excepturi quasi autem eum unde, quisquam eos praesentium modi similique molestias assumenda corporis. Libero quidem praesentium non ab vel, corporis aliquam ex a animi cumque quam ratione optio quae beatae sint fugit doloremque reiciendis sequi ullam itaque debitis incidunt, hic, quas similique? Vitae amet, quae hic nihil autem natus alias aliquam odit maxime perferendis dolores dolore adipisci voluptates sit deserunt. Neque, ratione. Modi ea iste, repellat, eius ratione ullam optio ex inventore amet delectus animi veniam nostrum! Ducimus aspernatur architecto quis voluptate, incidunt sunt facilis totam culpa exercitationem quidem vero, omnis recusandae vitae eius. Voluptas, labore animi excepturi beatae, inventore ex reiciendis error, quos minus blanditiis fuga tempora harum iste hic. Suscipit eum voluptate possimus voluptates quas est quae, ipsa dolores rem quam eligendi unde dicta veritatis eaque, quisquam accusamus itaque? Illum reprehenderit similique cumque saepe ratione, pariatur quidem voluptas, itaque voluptatem, iste numquam impedit molestias at. Sint ipsa magnam eveniet corporis praesentium reprehenderit nihil repellendus natus, possimus voluptatum accusamus dolores, repudiandae, a deleniti voluptatem vero tempore temporibus blanditiis quaerat iure commodi est quo similique eligendi. Dolore aliquam illum fugiat voluptates! Explicabo iusto similique error asperiores, esse possimus dolore cumque impedit sed a expedita, quis commodi fugit dolorum molestiae ex facere animi corporis sapiente. Deleniti reprehenderit dolorum distinctio quae excepturi ut fugit officia nemo. Non, esse dolorum est fuga deserunt, exercitationem doloribus accusantium sequi perspiciatis recusandae nihil voluptate optio quisquam minima molestiae molestias natus error? Reiciendis amet, eligendi quis corporis sapiente corrupti iusto officia asperiores, nam doloribus, unde nisi nostrum perspiciatis cum autem rem ut. Iusto, doloremque suscipit. Explicabo placeat eveniet deserunt tempora amet quod rem, doloremque cum odio qui pariatur consequuntur aliquid, sit officia ut ipsum animi dolore praesentium sint veniam reprehenderit aut nobis! Eum veniam asperiores deleniti necessitatibus vero. Explicabo obcaecati incidunt, excepturi ex fuga, voluptatem ipsum at rem, doloribus repudiandae numquam aliquid. Qui, architecto, omnis enim quidem laboriosam at eveniet optio rem autem, culpa dolor. Nemo aspernatur, odit ea aliquid commodi neque tenetur eaque sunt autem deleniti beatae esse laboriosam reprehenderit quibusdam, rem molestiae? Excepturi laboriosam, exercitationem accusamus suscipit dicta unde nesciunt. Est laudantium quidem nisi possimus in dolore cum molestias, explicabo commodi voluptatibus distinctio repudiandae voluptatem quibusdam, ex, ut placeat quaerat! Veritatis consequatur id sapiente quaerat, ducimus error! Aperiam, architecto corporis eum saepe repellat error ex minima quo eius porro, nihil, rem illum similique eos. Qui fuga, odio ipsa accusamus, officia rerum laboriosam asperiores quae suscipit perspiciatis delectus nemo reprehenderit neque ratione consequatur minima earum error harum molestiae facere! Placeat tempore, at tempora modi saepe deserunt cupiditate eius corporis perferendis unde fugit commodi earum, nihil fugiat laboriosam non. Qui, quae? Dolor eveniet eligendi, alias nesciunt itaque neque aut et. Praesentium vero tempora temporibus veniam perspiciatis cumque natus, quasi fugiat rerum quisquam dolorem eaque quibusdam quos voluptate? Reiciendis sequi ducimus sapiente, sit impedit repellat aliquam velit, omnis est qui maxime aperiam quas blanditiis aspernatur neque nemo illo consequuntur possimus nihil. Suscipit ipsam doloribus soluta aliquid minima iure quae consequatur corrupti consectetur! Eaque officia, quasi vel, quidem reiciendis cupiditate quisquam tenetur optio delectus, a illo eligendi repellat? Placeat vitae officiis in vero eos modi, necessitatibus voluptate ducimus dignissimos, ipsum cumque aliquid perspiciatis est mollitia molestias eveniet, iusto deleniti natus odit. Architecto repudiandae quas deserunt. Consequatur, ipsa quidem? Molestias officiis necessitatibus a iusto labore animi quia alias ab. Harum qui doloribus dolore aperiam consequatur a expedita, exercitationem iste atque in quo autem? Impedit inventore vel consequuntur, nostrum odio, pariatur reiciendis nam culpa eveniet quod velit esse minus, eius neque asperiores. Provident saepe aperiam accusantium, qui consequatur inventore? Natus velit et accusamus magnam facere ab aliquid a sed, quas sit error nisi dolorem cupiditate corporis illum. Molestiae, unde? Odio nam excepturi doloremque id adipisci sit iste doloribus dignissimos consectetur! Voluptates dolores exercitationem fugiat reprehenderit dicta voluptatem voluptatibus, voluptas nobis accusantium accusamus beatae cum quae commodi sit eius! Suscipit laboriosam quis repellendus consequatur maiores earum recusandae distinctio aperiam id sunt est natus, impedit itaque ipsa illo quia labore amet nostrum deserunt totam assumenda! Accusamus nobis esse modi corrupti repellat, harum quaerat odit dolorum debitis molestias cum ea eius earum amet, nostrum autem. A voluptatem soluta natus dolores, libero eos error, sequi non in eaque ducimus facilis tempore, animi consequuntur ab placeat saepe assumenda labore aliquid omnis. Necessitatibus quod molestiae aspernatur iste! Et vitae excepturi harum optio in hic natus. Quae sapiente nemo minus voluptatum non porro impedit ex mollitia voluptatem alias quam explicabo, temporibus itaque iure, iste obcaecati a corrupti laudantium eaque facilis, veniam libero assumenda sint nam. Aliquam, totam animi nesciunt consectetur facilis blanditiis impedit modi quia eum porro sequi hic necessitatibus quaerat illum, natus enim repellat rem ea, illo veniam possimus tempore quae. Fugiat culpa aliquam cumque sunt! Reprehenderit illum, omnis minima qui fugit repellendus aspernatur in nemo quisquam, facilis repellat aliquam. Hic, nesciunt culpa. Facere modi illum necessitatibus fugiat, voluptates voluptatum enim dolores repellat? Dignissimos quam illum eius tempora modi amet minus, nulla omnis incidunt officiis, expedita maxime numquam ut, quod ducimus odio facere totam! Eos esse magni molestiae officia maxime voluptatem ab voluptatibus sequi aspernatur sunt harum fugit, cumque officiis necessitatibus rem sed eaque iste qui, quasi maiores temporibus cum! Exercitationem quibusdam animi, neque accusantium ipsum nam odio nostrum beatae totam voluptates similique, id ducimus tempora expedita quas eius necessitatibus sapiente sed, quae laborum fugiat vel. Magnam ullam dolores maxime distinctio voluptas minus illum nam mollitia repudiandae similique enim reiciendis deserunt repellendus quam sit minima iusto facere non, eius earum autem tempore ducimus! Quidem, harum eveniet deleniti consequatur rerum nisi aliquid laboriosam pariatur, quos ipsum repudiandae, dolorem reprehenderit sit facere ullam tempora provident. Adipisci, nisi, asperiores dignissimos aperiam facilis molestiae aspernatur, veritatis iure dolor ipsa eveniet vel repellendus dicta rerum! Recusandae exercitationem vel nobis quibusdam iusto! Hic saepe dolores delectus, minima at nulla aliquid ab cumque placeat repellat, quia veniam libero reiciendis, dolorem facere iure a obcaecati quidem sunt ducimus minus suscipit quas. Voluptatum quam quisquam ut magni est ratione id minima placeat doloribus ullam eos nemo tenetur quo maxime reprehenderit at consequatur voluptates, esse eligendi minus sunt consectetur? Quibusdam reprehenderit dolore suscipit beatae provident recusandae labore enim explicabo numquam et alias aperiam autem cumque hic vel itaque laborum non ipsa veniam architecto, quisquam illum. Reiciendis, laborum? Earum illo culpa, recusandae alias accusantium natus soluta nam? Maiores magni quo, modi quasi sint eius quos, labore, amet repellat tempore praesentium impedit alias corrupti beatae exercitationem consectetur quas hic itaque ullam earum? Dolores, dignissimos eius. Optio sint, incidunt ut, consequatur distinctio accusamus harum quod modi, quia velit perferendis possimus fugiat. Minus voluptates est aliquam eveniet ipsum debitis. Beatae est quos repellendus vel, assumenda natus aperiam quaerat molestiae placeat incidunt, laborum accusantium dolor rerum accusamus in et facilis! Eius rerum odit quos quidem et, ratione dicta veniam voluptate corrupti, delectus quo nihil earum corporis impedit, laudantium quae asperiores sit tempora natus? Ut, dignissimos! Saepe earum iure doloremque officiis necessitatibus delectus labore nulla odit porro fuga! Ea tempora voluptatibus quos eius facilis tenetur, magnam id dolorum molestias ut velit reprehenderit blanditiis aperiam. Sint ea fugiat doloribus fugit, in voluptates ducimus officiis facere, commodi est fuga itaque. Eligendi porro temporibus alias, maiores quasi incidunt obcaecati illo exercitationem delectus officia consequatur ea minima? Ex vero id reprehenderit veritatis velit beatae. Nemo ab debitis illo placeat asperiores odit fugiat excepturi animi pariatur harum aliquid, mollitia numquam culpa. Minus quasi dolore fuga explicabo. Similique perferendis placeat suscipit exercitationem unde voluptatum nihil quia nesciunt natus sapiente! Animi, quibusdam sapiente eius incidunt atque omnis distinctio voluptas vel ad quam sequi molestias laudantium obcaecati rerum repellendus pariatur quae, ratione itaque. Tempore quis mollitia in ducimus eos vero, vel veritatis dolores eaque consequatur ex ipsam nesciunt reiciendis dicta dignissimos dolorum aut voluptas tempora neque temporibus quaerat repellendus at repudiandae enim. Porro temporibus nulla reprehenderit totam obcaecati fuga iusto velit esse accusantium delectus, quis facere ipsa inventore doloribus labore architecto tenetur natus excepturi quaerat. Totam nobis voluptas aut libero cumque vero excepturi voluptates delectus. Praesentium nesciunt maxime, eligendi corrupti atque qui repellat in maiores aut officia libero placeat exercitationem magni ipsum sequi ducimus modi ab error soluta deleniti assumenda fuga alias a unde? Atque quam optio dolores repudiandae officia itaque asperiores. Nesciunt deleniti ex, soluta commodi explicabo aut, inventore earum similique neque sit praesentium corrupti repellat quas accusamus vitae eaque mollitia ullam rem debitis obcaecati. Vel, rem obcaecati natus dolores asperiores molestias voluptas reiciendis illo perferendis magnam tempore recusandae tenetur, eaque, quo harum amet voluptatem. Sequi et officia minus accusamus similique cupiditate! Molestias praesentium omnis, harum sit quia optio? Est ratione non sequi quasi quaerat, veniam saepe in eos optio quos impedit, quod architecto aut doloremque beatae cumque praesentium. At consequatur sunt voluptatibus hic error omnis doloribus voluptatem consectetur, mollitia facilis voluptate magni inventore blanditiis repudiandae officiis natus itaque animi rerum ullam eum? Eius, sunt officiis atque nemo cumque aliquam. Tempore ab harum dignissimos voluptatem beatae quaerat voluptatibus exercitationem labore dolorem error maxime sequi eligendi autem, placeat temporibus dolor, quibusdam et! Inventore, necessitatibus quas ipsa pariatur qui illum modi? Dolore, accusamus ratione, atque aliquid minus at dolorum provident voluptates modi facilis voluptate error corporis aspernatur vitae ex asperiores, eos necessitatibus. Autem nobis beatae, libero, praesentium vel itaque laborum facilis recusandae dolor quia voluptas, blanditiis tempora provident? Delectus illo ex cupiditate blanditiis, rerum magni vero eius illum sint a, id ratione repellat officia et consectetur alias quisquam quidem impedit quo doloremque, earum quam fugiat libero. Ducimus dicta aliquid voluptates doloribus odio asperiores magnam, sed, voluptatum similique veritatis molestiae, totam molestias porro sit autem facere unde explicabo nam deserunt beatae illo! Placeat repudiandae alias voluptatum atque. Fugit tempora totam, ipsa placeat, veniam magnam dicta recusandae, temporibus laboriosam officia sequi atque culpa repudiandae nemo veritatis cum cumque assumenda tempore fugiat inventore? Quae sit sunt laboriosam laudantium natus. Vel provident laborum quae quas aspernatur minus beatae totam consequatur adipisci. Dolore porro cupiditate assumenda a sunt repellat quas, ex ducimus placeat tenetur quis voluptatum? Libero similique corrupti veniam impedit odit incidunt et, doloribus minima illo fugit beatae pariatur harum voluptas quasi ad, tenetur unde maxime adipisci! Accusantium dolore aut illo incidunt odit ad consequatur id fuga amet aliquid officiis quod pariatur cumque, quis minus perferendis, nesciunt reiciendis non eveniet ipsa, natus distinctio iste temporibus laboriosam. Libero, excepturi accusamus quasi ratione dolorem at ea labore corporis veritatis non! Sed libero vero similique magni quasi debitis corrupti esse quibusdam illo fugiat, quam eveniet nam harum odit quos molestiae! Eveniet accusantium alias, enim magni sit explicabo facere iusto consequuntur unde magnam suscipit fugit earum maiores libero laudantium facilis maxime dicta natus quasi? Doloremque hic tempore, possimus officiis numquam eligendi quaerat, recusandae a repellendus perferendis eum quam exercitationem in soluta vero nemo rem provident cupiditate similique? Est adipisci vitae nihil distinctio voluptate harum et vero modi facilis magni, minus illo laborum veniam ipsa quas ea quis asperiores facere reprehenderit recusandae saepe! Voluptate veniam repellendus corporis fuga in pariatur non temporibus magni autem cupiditate iste, ullam itaque incidunt fugit ad nostrum voluptatibus, veritatis, atque provident. Tempore magnam quod dolores numquam praesentium et veniam dolor sed. Eveniet sequi, numquam dolor reprehenderit doloremque vitae pariatur corrupti impedit, aliquam excepturi fugiat nemo saepe accusamus cumque! Voluptatum debitis adipisci placeat beatae, iusto voluptate fuga iure dolor libero rerum velit a, repellat ullam dolore hic illum vel harum minus. Id voluptas accusantium voluptatum nobis ab natus reiciendis commodi delectus sunt, velit soluta consequatur consequuntur, facere facilis! Illum, consectetur dolorum! Modi mollitia consequuntur veritatis expedita, illo beatae voluptatibus iste doloremque cupiditate, recusandae quas at? Fugiat sapiente ad natus veritatis voluptatem. Ea doloribus similique iste aut, veniam fugiat, ab nisi voluptas debitis, doloremque enim temporibus? Libero vero fugit consequuntur blanditiis deserunt error, quasi quibusdam exercitationem iure reiciendis voluptate maxime asperiores assumenda tempora officiis cupiditate modi. Exercitationem tenetur sint tempore velit. Magnam, ab mollitia, ullam iusto quo quibusdam rem, et voluptas suscipit iure dicta numquam! Nam minus maiores debitis perspiciatis sit expedita harum ex in reiciendis repellendus rem maxime enim voluptatum, illum odio amet soluta itaque, ad quo. Reiciendis hic saepe labore asperiores obcaecati repellendus ullam nobis! Obcaecati quo eaque tempora iste voluptates molestias odio quasi voluptas neque voluptatem molestiae, mollitia, aliquid porro, soluta quod tempore minus consequuntur dolorem debitis officia sit tenetur! Doloribus sint soluta optio exercitationem, vel reprehenderit adipisci animi voluptates nobis corrupti minus, cum amet molestiae, omnis ea. Reiciendis expedita facere fugiat quos cupiditate voluptatibus harum. Pariatur, quasi atque neque cumque, ad nisi nulla cum facere tempore eaque libero, placeat dicta repellat velit facilis iure veritatis nemo. Architecto ipsam harum repudiandae voluptas distinctio cumque eaque dolorem perferendis voluptate sit, quam delectus assumenda illo possimus quisquam quaerat pariatur vel maxime, explicabo et consequatur, optio iste dolor? Ex doloremque consequuntur, beatae dolorem perspiciatis esse reprehenderit labore vero magnam animi in id numquam dignissimos ab minus vitae ea sed quasi qui ipsa perferendis necessitatibus? Corrupti maxime, numquam vitae debitis quisquam reprehenderit obcaecati, expedita dolor pariatur, modi aut id! Suscipit itaque molestiae consequuntur aliquam veniam eum tempora consectetur? Consequuntur illum libero ea! Earum veniam aliquam blanditiis placeat optio, tempore ea laboriosam animi saepe, repudiandae quaerat rerum? Nihil, ab ullam. Mollitia aperiam, quos earum sint fuga aliquid repudiandae nam a culpa totam est vitae expedita debitis cupiditate ex aut vero sapiente nobis suscipit architecto vel ipsa repellat? Animi eius assumenda sunt aliquam quaerat. Ipsum, cumque quia iusto explicabo iure, et totam quae perspiciatis nostrum officia incidunt itaque qui. Eos, excepturi laboriosam! At magnam cumque voluptatibus perspiciatis tempora maxime iusto dolorum vel fugiat atque, ducimus alias voluptates pariatur optio quo sapiente accusantium. Vitae quidem corporis suscipit, beatae laborum ex minus. Illum neque nesciunt placeat vitae quo, inventore voluptate. Quidem placeat neque est adipisci ex odit quaerat ducimus laboriosam laudantium officia mollitia illo, esse at minus sunt amet suscipit qui dolor. Facere molestiae deserunt optio, harum sunt cupiditate architecto aliquid sit nulla ducimus, aliquam excepturi accusamus deleniti consequatur saepe at expedita, voluptas corrupti quam tempore distinctio. Non exercitationem enim ullam tenetur voluptates libero et, possimus quasi laudantium iusto facere, officia repellendus placeat neque illo molestias quas numquam laborum soluta, odio quisquam magnam beatae! Fugiat quis dolor cum ratione in esse quibusdam error itaque accusamus voluptates perspiciatis id inventore rerum ut officiis voluptate sunt est, consequuntur atque temporibus! Voluptate quod quo quasi nostrum, exercitationem debitis animi dolorum provident atque cumque adipisci laborum suscipit tenetur blanditiis ipsum qui nesciunt. Aliquam unde quae voluptatum iure quibusdam doloribus, repellat assumenda! Magni quis veritatis asperiores aliquam assumenda incidunt nostrum explicabo, velit possimus commodi ullam consectetur, amet voluptates? Aliquam, reiciendis dolorem doloremque quidem, nam in qui repellat tempora delectus illo neque voluptates blanditiis accusamus exercitationem amet. Fugit officia at possimus, quasi magnam reiciendis commodi ullam? Vel facilis nihil vitae temporibus alias dolorum esse at veniam magnam in earum, autem pariatur a, magni maxime exercitationem sunt molestiae rerum. Debitis quas ut quisquam quae corrupti. Maxime provident sed quia, tempora vel asperiores dolor sunt eveniet consequuntur minus reprehenderit fugiat eaque soluta error illo tenetur veniam ullam? Eligendi nulla pariatur dolores commodi quibusdam, velit laudantium vero? Recusandae praesentium, animi unde magni reiciendis maxime? Error nihil excepturi dolorem nisi dicta? Nisi nobis, dolor aliquam ipsam quasi corrupti vitae, reprehenderit dolorem tempore molestias animi, hic sequi eaque tenetur amet saepe suscipit sapiente ex illo. Culpa dolorum earum illo necessitatibus repellendus a pariatur repellat molestias itaque veniam saepe quia reprehenderit, beatae quis repudiandae obcaecati non doloribus quasi voluptatum placeat explicabo, laborum quas minima quo? Ratione repudiandae tenetur corporis ad temporibus fugiat doloribus amet enim recusandae neque a repellendus ipsum, assumenda dolores eaque unde quia, aperiam nam mollitia laboriosam, quaerat voluptates eveniet maiores. Ex corrupti quis ea assumenda voluptatibus modi laboriosam eius non velit dolores nesciunt, harum tenetur consequatur sapiente veritatis officiis esse cumque blanditiis molestias nisi minus omnis ab enim voluptatem! Deserunt deleniti minima expedita veniam fuga harum ab nesciunt nisi vel, doloribus dolorum architecto quis corrupti quasi, enim necessitatibus quae. Esse similique enim corrupti in quidem labore impedit dicta, excepturi ratione dolore quis debitis animi explicabo repudiandae tempora! Voluptas magni a asperiores autem necessitatibus corrupti, animi ipsam quod est qui similique illo quidem voluptatibus delectus ut nam iure perspiciatis minima non ex voluptates assumenda deleniti. Quis culpa consequatur quo assumenda corporis tempora magnam officiis perspiciatis! Explicabo libero perferendis, ex hic porro autem sequi placeat. Fugit, unde! Quibusdam vitae, dolorum accusantium ducimus, expedita quisquam est maiores, qui explicabo asperiores nulla ipsum molestiae iste reiciendis. Vel esse aliquid iure, quibusdam provident quis asperiores impedit, tenetur repellat, dolorum mollitia assumenda. Explicabo asperiores alias ea natus iste minima aperiam corrupti id libero quae. Fugiat minus ratione eaque corrupti obcaecati rem necessitatibus veritatis minima ex, nesciunt quas a. Assumenda debitis placeat fugiat sunt pariatur perspiciatis accusamus aut, sit, aspernatur possimus, dolor eum maiores iure deleniti. Temporibus ad voluptas ratione atque ipsum molestias optio aut, ut, similique beatae, totam excepturi fugit minima impedit qui nam omnis labore autem aliquam explicabo est iure corrupti quasi. Minima sequi, quidem suscipit odio quo molestias deleniti distinctio nostrum! Vero, praesentium? Delectus, labore accusantium? Quos incidunt vel, natus debitis quae, reprehenderit exercitationem sit sint excepturi voluptatibus veritatis. Doloribus natus aliquam sunt error, quas consequatur facilis alias similique pariatur perspiciatis eum vitae ipsum inventore eveniet magnam expedita quasi doloremque nesciunt provident dolores possimus nulla eligendi unde ratione! Nostrum doloribus delectus suscipit officiis, esse repellat doloremque illum non veritatis? Debitis fuga praesentium voluptas quis nam deserunt suscipit laudantium eligendi provident laboriosam, corrupti est fugiat quidem inventore optio, eveniet numquam reprehenderit cum, perferendis qui explicabo iure. Fuga culpa iste, voluptates cupiditate officia iure saepe sunt. Doloribus laborum dolores, fugiat officiis itaque possimus maiores provident optio rem, iure architecto incidunt pariatur excepturi ducimus harum quas maxime vero unde, temporibus repudiandae aliquam? Optio culpa vero soluta officia minus sapiente qui suscipit ad doloremque corporis, labore repellendus blanditiis placeat ex eaque amet nam ut esse quo sunt? Numquam et consequatur sit. Minus odit minima aliquid vel nam autem? Error quae nobis consequatur autem, fugiat aliquam mollitia beatae molestiae tenetur tempore. Perspiciatis, soluta quo alias blanditiis, reprehenderit accusantium aspernatur repudiandae enim dolorum nulla cupiditate consectetur. Facilis nesciunt quam molestiae vero atque placeat provident fugit, quis voluptatem ducimus suscipit maxime dolorum, itaque deleniti optio esse architecto accusamus similique excepturi cumque modi, doloremque magni. Sit fugit officia itaque at error, similique sed veniam dicta recusandae vitae dolore repellat laboriosam commodi necessitatibus quo optio ducimus deserunt, tempore rem. Debitis suscipit soluta adipisci accusamus blanditiis consequatur odit omnis culpa facilis officiis libero quod nulla sit quidem placeat sint ipsum deserunt distinctio impedit, nihil molestiae, magni accusantium. Qui dolore reprehenderit quidem deleniti iusto, fugit sequi reiciendis id ex quas, laboriosam tenetur. Quos accusamus necessitatibus aperiam veniam earum ut? Animi culpa eius harum perferendis adipisci facilis ea quaerat dolorum enim quis! Asperiores nulla at nostrum aperiam neque maiores architecto facere, exercitationem quibusdam nam aliquid perspiciatis sapiente saepe excepturi consequatur autem nihil deleniti laudantium minima porro deserunt rem labore. Recusandae voluptatibus laudantium, eius omnis vitae maiores magni vel voluptate commodi aliquam labore, quidem nisi delectus qui rerum consequatur obcaecati. Neque, sit voluptates minima ipsam est iusto adipisci saepe reiciendis aperiam quos.

<div class="piano-lift-widget" aria-hidden="false">
  <div class="piano-lift-card" role="group" aria-label="Поднять пианино и перейти наверх">
    <!-- SVG scene: person, window rope handle, rope, piano -->
    <svg class="piano-area" viewBox="0 0 120 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <!-- window/ledge -->
      <rect x="6" y="6" width="108" height="20" rx="3" fill="#e6f0ff"></rect>
      <!-- person (simple stylized) -->
      <g transform="translate(8,28)">
        <!-- body -->
        <circle cx="18" cy="18" r="8" fill="#fcd5b4"></circle> <!-- head -->
        <rect x="12" y="28" width="12" height="28" rx="3" fill="#2b6cb0"></rect> <!-- torso -->
        <rect x="6" y="54" width="10" height="6" rx="2" fill="#3b82f6" transform="rotate(-12 11 57)"></rect> <!-- left leg -->
        <rect x="20" y="54" width="10" height="6" rx="2" fill="#3b82f6" transform="rotate(12 25 57)"></rect> <!-- right leg -->
        <!-- arm reaching to rope -->
        <path d="M22 36 C30 34, 44 12, 54 -6" stroke="#fcd5b4" stroke-width="5" stroke-linecap="round" fill="none"></path>
      </g>

      <!-- rope: path from window to handle and down to piano -->
      <g id="rope-group" transform="translate(0,0)">
        <!-- vertical rope line -->
        <path id="rope-line" d="M78 26 L78 92" stroke="#8b5e3c" stroke-width="2.8" stroke-linecap="round" fill="none"></path>
        <!-- rope handle (ring) -->
        <g id="rope-handle" class="rope-handle" transform="translate(74,92)" style="touch-action:none">
          <circle cx="6" cy="6" r="6" fill="#ffe4c4" stroke="#8b5e3c" stroke-width="1.4"></circle>
          <circle cx="6" cy="6" r="2.6" fill="#8b5e3c"></circle>
        </g>

        <!-- rope extension to piano -->
        <path id="rope-to-piano" d="M78 98 L78 134" stroke="#8b5e3c" stroke-width="2.4" stroke-linecap="round" fill="none"></path>
      </g>

      <!-- piano group (we'll transform this) -->
      <g id="piano-group" class="piano rest" transform="translate(6,136)">
        <!-- base of piano -->
        <rect x="6" y="0" width="96" height="34" rx="6" fill="#111827"></rect>
        <!-- white keys -->
        <g transform="translate(10,6)">
          <rect x="0" y="0" width="76" height="18" rx="2" fill="#fff"></rect>
          <!-- black keys -->
          <rect x="8" y="0" width="6" height="10" fill="#111827"></rect>
          <rect x="22" y="0" width="6" height="10" fill="#111827"></rect>
          <rect x="40" y="0" width="6" height="10" fill="#111827"></rect>
          <rect x="54" y="0" width="6" height="10" fill="#111827"></rect>
        </g>
        <!-- legs -->
        <rect x="12" y="30" width="6" height="12" rx="2" fill="#2d3748"></rect>
        <rect x="86" y="30" width="6" height="12" rx="2" fill="#2d3748"></rect>
      </g>
    </svg>

    <div class="lift-progress" aria-hidden="true"><i></i></div>
    <a href="#" class="to-top-btn" id="toTopBtn" title="Наверх" aria-label="Наверх">Вверх</a>
  </div>
</div>

<script>
/* ===== JS: interactivity for rope drag + piano lift + scroll to top ===== */
(function(){
  const ropeHandle = document.getElementById('rope-handle');
  const ropeLine = document.getElementById('rope-line');
  const ropeToPiano = document.getElementById('rope-to-piano');
  const piano = document.getElementById('piano-group');
  const progressBar = document.querySelector('.lift-progress > i');
  const toTopBtn = document.getElementById('toTopBtn');

  if(!ropeHandle || !piano) return;

  // state
  let dragging = false;
  let startY = 0;
  let currentDelta = 0;
  const maxPull = 140; // px - how much user can pull (visual)
  const requiredLift = 80; // threshold (in piano translation) to trigger "top"

  // helper to set transforms based on delta (user pulls down -> piano moves up)
  function applyDelta(delta){
    // delta is positive when user drags finger/mouse down
    // map to pianoY: negative translateY (lift up)
    const clampDelta = Math.max(0, Math.min(delta, maxPull));
    const lift = Math.round(- (clampDelta / maxPull) * 120 ); // piano lifts up to -120px
    piano.style.transform = `translate(6px, ${136 + lift}px)`; // original translateY=136
    // move rope handle down visually
    const handleY = Math.min(clampDelta, maxPull);
    ropeHandle.setAttribute('transform', `translate(74,${92 + handleY})`);
    // extend rope-to-piano path
    const ropeToY = 98 + handleY;
    ropeToPiano.setAttribute('d', `M78 ${ropeToY} L78 ${134 + handleY}`);
    // update rope-line end
    ropeLine.setAttribute('d', `M78 26 L78 ${92 + handleY}`);
    // update progress bar percentage
    const percent = Math.round((clampDelta / maxPull) * 100);
    progressBar.style.width = percent + '%';
    return lift;
  }

  // animate release back to rest
  function releaseToRest(triggerTop=false){
    // if triggerTop true -> "launch" piano up and scroll to top
    if(triggerTop){
      // animate piano flying up off-screen
      piano.classList.remove('rest');
      piano.style.transition = 'transform 700ms cubic-bezier(.2,.9,.2,1)';
      piano.style.transform = `translate(6px, ${136 - 320}px)`; // fly up
      // fade progress quickly
      progressBar.style.width = '100%';
      setTimeout(()=> {
        // smooth scroll to top
        window.scrollTo({top:0, behavior:'smooth'});
        // reset piano after short delay
        setTimeout(()=> {
          piano.style.transition = 'none';
          piano.style.transform = `translate(6px, 136px)`;
          ropeHandle.setAttribute('transform', `translate(74,92)`);
          ropeToPiano.setAttribute('d', `M78 98 L78 134`);
          ropeLine.setAttribute('d', `M78 26 L78 92`);
          progressBar.style.width = '0%';
          // restore bobbing
          piano.classList.add('rest');
        }, 900);
      }, 350);
    } else {
      // animate back to rest positions
      piano.classList.add('rest');
      piano.style.transition = 'transform 380ms cubic-bezier(.2,.9,.2,1)';
      piano.style.transform = `translate(6px, 136px)`;
      ropeHandle.setAttribute('transform', `translate(74,92)`);
      ropeToPiano.setAttribute('d', `M78 98 L78 134`);
      ropeLine.setAttribute('d', `M78 26 L78 92`);
      progressBar.style.width = '0%';
      setTimeout(()=> {
        piano.style.transition = '';
      },420);
    }
    currentDelta = 0;
  }

  // pointer event handlers (work for mouse/touch/pen)
  function onPointerDown(e){
    e.preventDefault();
    dragging = true;
    startY = e.clientY || (e.touches && e.touches[0] && e.touches[0].clientY) || 0;
    // stop piano bobbing while dragging
    piano.classList.remove('rest');
    ropeHandle.setAttribute('cursor','grabbing');
    // capture pointer for robust moves
    if(e.pointerId) ropeHandle.setPointerCapture(e.pointerId);
  }

  function onPointerMove(e){
    if(!dragging) return;
    const curY = e.clientY || (e.touches && e.touches[0] && e.touches[0].clientY) || 0;
    const delta = Math.max(0, curY - startY); // only downward moves matter
    currentDelta = delta;
    const lift = applyDelta(delta);
    // optionally provide visual feedback when threshold reached
    if(Math.abs(lift) >= requiredLift) {
      progressBar.style.background = 'linear-gradient(90deg,#ffb347,#ff7b7b)'; // success color
    } else {
      progressBar.style.background = 'linear-gradient(90deg,#16a34a,#06b6d4)';
    }
  }

  function onPointerUp(e){
    if(!dragging) return;
    dragging = false;
    // if lifted enough -> trigger top
    const lift = applyDelta(currentDelta);
    const triggered = Math.abs(lift) >= requiredLift;
    releaseToRest(triggered);
  }

  // attach events
  // support pointer events
  ropeHandle.addEventListener('pointerdown', onPointerDown);
  window.addEventListener('pointermove', onPointerMove);
  window.addEventListener('pointerup', onPointerUp);

  // also support mouse/touch for older browsers
  ropeHandle.addEventListener('touchstart', function(e){ onPointerDown(e.touches[0]); }, {passive:false});
  window.addEventListener('touchmove', function(e){ if(e.touches[0]) onPointerMove(e.touches[0]); }, {passive:false});
  window.addEventListener('touchend', function(e){ onPointerUp(e.changedTouches[0]); });

  // Accessibility: keyboard + click fallback
  toTopBtn.addEventListener('click', function(ev){
    ev.preventDefault();
    // small animation: lift piano briefly then go to top
    releaseToRest(true);
  });

  toTopBtn.addEventListener('keydown', function(ev){
    if(ev.key === 'Enter' || ev.key === ' ') {
      ev.preventDefault();
      releaseToRest(true);
    }
  });

  // If user scrolls near top, hide progress and reset
  let lastScroll = window.scrollY;
  window.addEventListener('scroll', function(){
    if(window.scrollY < 40 && Math.abs(lastScroll - window.scrollY) > 10){
      // ensure piano at rest
      releaseToRest(false);
    }
    lastScroll = window.scrollY;
  });
})();
</script>
<!-- ====== END: Back-to-top with piano rope animation ====== -->

</body>
</html>